<!-- templates/errors/500.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Server Error - Solidus</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        .error-animation {
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        .fade-in {
            opacity: 0;
            animation: fadeIn 1s ease forwards;
            animation-delay: 0.3s;
        }

        @keyframes fadeIn {
            to { opacity: 1; }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen flex items-center justify-center">
    <div class="max-w-2xl mx-auto px-4 text-center">
        <!-- Error Illustration -->
        <div class="error-animation mb-8">
            <div class="text-red-500 mb-6">
                <i class="fas fa-exclamation-triangle text-8xl"></i>
            </div>
            <h1 class="text-6xl font-bold text-gray-800 mb-4">500</h1>
        </div>

        <!-- Error Message -->
        <div class="fade-in">
            <h2 class="text-3xl font-bold text-gray-900 mb-4">Internal Server Error</h2>
            <p class="text-lg text-gray-600 mb-8 max-w-md mx-auto">
                Something went wrong on our end. We're working to fix this issue. Please try again in a few minutes.
            </p>

            <!-- Action Buttons -->
            <div class="flex flex-wrap justify-center gap-4 mb-8">
                <button onclick="window.location.reload()"
                        class="bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 transition flex items-center">
                    <i class="fas fa-redo mr-2"></i>Try Again
                </button>

                <a href="{% url 'core:dashboard' %}"
                   class="bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition flex items-center">
                    <i class="fas fa-home mr-2"></i>Go to Dashboard
                </a>

                <button onclick="history.back()"
                        class="bg-gray-600 text-white px-6 py-3 rounded-lg hover:bg-gray-700 transition flex items-center">
                    <i class="fas fa-arrow-left mr-2"></i>Go Back
                </button>
            </div>

            <!-- Error Details (for debugging) -->
            {% if user.is_staff %}
                <div class="bg-red-50 border border-red-200 rounded-lg p-4 mb-8 text-left max-w-lg mx-auto">
                    <h3 class="font-semibold text-red-800 mb-2">Debug Information (Staff Only)</h3>
                    <div class="text-sm text-red-700 space-y-1">
                        <p><strong>Time:</strong> {{ request.timestamp|default:"Unknown" }}</p>
                        <p><strong>Path:</strong> {{ request.path }}</p>
                        <p><strong>Method:</strong> {{ request.method }}</p>
                        <p><strong>User:</strong> {{ request.user|default:"Anonymous" }}</p>
                    </div>
                </div>
            {% endif %}

            <!-- Support Information -->
            <div class="bg-white rounded-lg shadow-lg p-6">
                <h3 class="text-lg font-semibold text-gray-900 mb-4">Need Help?</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                    <div>
                        <h4 class="font-medium text-gray-700 mb-2">Contact Support</h4>
                        <p class="text-gray-600 mb-2">Our team is here to help</p>
                        <a href="mailto:support@solidus.example.com"
                           class="text-blue-600 hover:text-blue-700">
                            <i class="fas fa-envelope mr-1"></i>support@solidus.example.com
                        </a>
                    </div>

                    <div>
                        <h4 class="font-medium text-gray-700 mb-2">Status Page</h4>
                        <p class="text-gray-600 mb-2">Check system status</p>
                        <a href="#" class="text-blue-600 hover:text-blue-700">
                            <i class="fas fa-chart-line mr-1"></i>status.solidus.example.com
                        </a>
                    </div>
                </div>
            </div>

            <!-- Error Reference -->
            <div class="mt-6 text-xs text-gray-400">
                Error Reference: {{ request.session.session_key|default:"unknown" }}-{{ "now"|date:"YmdHis" }}
            </div>
        </div>
    </div>

    <script>
        // Auto-refresh after 30 seconds
        setTimeout(function() {
            if (confirm('Would you like to refresh the page and try again?')) {
                window.location.reload();
            }
        }, 30000);

        // Track 500 errors for monitoring
        if (typeof gtag !== 'undefined') {
            gtag('event', 'exception', {
                'description': '500 - Internal Server Error',
                'fatal': true
            });
        }
    </script>
</body>
</html>